{% if slug is not defined %}
    {% set slug = '' %}
{% endif %}

{% if isBold is not defined %}
    {% set isBold = 0 %}
{% endif %}

{% set url = 'main_homepage'%}
{% set isActiveMenuItem = 0 %}

{% if ROUTE_NAME == 'main_category_show' %}
    {% set isActiveMenuItem = (app.request.attributes.get('slug') == slug) %}
        {% elseif ROUTE_NAME =='main_product_show' %}
    {% set isActiveMenuItem = (app.request.attributes.get('product')
        and app.request.attributes.get('product').category.slug == slug ) %}
    {% else  %}
    {% set isActiveMenuItem = (ROUTE_NAME == targetRoute)%}
{% endif %}

{% if targetRoute == 'main_category_show' %}
    {% set url = path('main_category_show' ,{'slug':slug}) %}
{% else %}
    {% set url = path(targetRoute) %}
{% endif %}

<li class="menu-item
    {% if isActiveMenuItem %}active{% endif %}
    {% if isBold %}font-weight-bold{% endif %}">
    <a href="{{url}}">
        <div>{{ label }}</div>
    </a>
</li>